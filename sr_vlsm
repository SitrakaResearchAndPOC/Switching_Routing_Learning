TP : Sous-rÃ©seau classique et VLSM avec Docker
ğŸ¯ Objectifs

Comprendre les sous-rÃ©seaux classiques et VLSM

CrÃ©er des rÃ©seaux Docker avec ces sous-rÃ©seaux

Lancer des conteneurs avec IP statique

Tester la connectivitÃ© entre conteneurs

Visualiser lâ€™adressage IP

1ï¸âƒ£ PrÃ©requis

Installer Docker si nÃ©cessaire :

sudo apt update
sudo apt install docker.io -y
sudo systemctl enable --now docker

2ï¸âƒ£ Sous-rÃ©seau classique
Concept

Tous les sous-rÃ©seaux ont le mÃªme masque (/24)

Ici, deux sous-rÃ©seaux :

192.168.100.64/24

192.168.100.128/24

Ã‰tape 1 : crÃ©er les rÃ©seaux Docker
docker network create --subnet=192.168.100.64/24 subnet_classic1
docker network create --subnet=192.168.100.128/24 subnet_classic2

Ã‰tape 2 : lancer les conteneurs
# Sous-rÃ©seau 1
docker run -dit --name vmC1 --net subnet_classic1 --ip 192.168.100.65 ubuntu:22.04 bash
docker run -dit --name vmC2 --net subnet_classic1 --ip 192.168.100.66 ubuntu:22.04 bash

# Sous-rÃ©seau 2
docker run -dit --name vmC3 --net subnet_classic2 --ip 192.168.100.129 ubuntu:22.04 bash
docker run -dit --name vmC4 --net subnet_classic2 --ip 192.168.100.130 ubuntu:22.04 bash

Ã‰tape 3 : tester la connectivitÃ©

MÃªme sous-rÃ©seau :

docker exec vmC1 ping -c 3 192.168.100.66


Sous-rÃ©seaux diffÃ©rents (isolÃ©s par Docker) :

docker exec vmC1 ping -c 3 192.168.100.129


Le ping Ã©chouera car Docker isole les sous-rÃ©seaux diffÃ©rents.

3ï¸âƒ£ Sous-rÃ©seau VLSM (masques variables)
Concept

Taille des sous-rÃ©seaux adaptÃ©e au nombre de machines nÃ©cessaires

Exemple :

Sous-rÃ©seau A â†’ 50 machines â†’ /26

Sous-rÃ©seau B â†’ 10 machines â†’ /28

Sous-rÃ©seau C â†’ 5 machines â†’ /29

On utilise ici les blocs /24 comme rÃ©seau parent, puis VLSM Ã  lâ€™intÃ©rieur :

192.168.100.64/24 â†’ sous-rÃ©seaux internes : /26, /28

192.168.100.128/24 â†’ sous-rÃ©seaux internes : /26, /29

Ã‰tape 1 : crÃ©er les sous-rÃ©seaux Docker
# Dans le bloc 192.168.100.64/24
docker network create --subnet=192.168.100.64/26 subnetA_vlsm   # 64 adresses
docker network create --subnet=192.168.100.128/28 subnetB_vlsm  # 16 adresses

# Dans le bloc 192.168.100.128/24
docker network create --subnet=192.168.100.160/26 subnetC_vlsm  # 64 adresses
docker network create --subnet=192.168.100.224/29 subnetD_vlsm  # 8 adresses

Ã‰tape 2 : lancer les conteneurs
# Subnet A
docker run -dit --name vlsmA1 --net subnetA_vlsm --ip 192.168.100.65 ubuntu:22.04 bash
docker run -dit --name vlsmA2 --net subnetA_vlsm --ip 192.168.100.66 ubuntu:22.04 bash

# Subnet B
docker run -dit --name vlsmB1 --net subnetB_vlsm --ip 192.168.100.129 ubuntu:22.04 bash

# Subnet C
docker run -dit --name vlsmC1 --net subnetC_vlsm --ip 192.168.100.161 ubuntu:22.04 bash

# Subnet D
docker run -dit --name vlsmD1 --net subnetD_vlsm --ip 192.168.100.225 ubuntu:22.04 bash

Ã‰tape 3 : tester la connectivitÃ©

MÃªme sous-rÃ©seau :

docker exec vlsmA1 ping -c 3 192.168.100.66
docker exec vlsmC1 ping -c 3 192.168.100.162  # si tu ajoutes un second conteneur


Sous-rÃ©seaux diffÃ©rents (isolÃ©s par Docker) :

docker exec vlsmA1 ping -c 3 192.168.100.129

4ï¸âƒ£ Affichage des interfaces et IP

Dans nâ€™importe quel conteneur :

docker exec vlsmA1 ip addr show
docker exec vlsmA1 ifconfig

5ï¸âƒ£ Exercices pratiques

Ajouter un deuxiÃ¨me conteneur dans subnetB_vlsm et tester la connectivitÃ©.

Calculer pour chaque sous-rÃ©seau :

Adresse rÃ©seau

Adresse broadcast

Plage dâ€™adresses utilisables

Modifier un conteneur pour utiliser une autre IP dans le mÃªme sous-rÃ©seau et vÃ©rifier ping.

6ï¸âƒ£ RÃ©sumÃ©
Type	Exemple de bloc	Masque	Avantage
Classique	192.168.100.64/24 et 192.168.100.128/24	/24 pour tous	Simple Ã  configurer
VLSM	Sous-rÃ©seaux internes /26, /28, /29	Variable	Optimisation des adresses IP, moins de gaspillage

Si tu veux, je peux te faire un schÃ©ma clair avec tous les sous-rÃ©seaux, les conteneurs et leurs IP, pour que ce TP soit trÃ¨s visuel et pÃ©dagogique.

Veuxâ€‘tu que je fasse Ã§aâ€¯?
